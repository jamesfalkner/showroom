:imagesdir: ../assets/images


= Module 4.2:  PE: Onboard parasol-API

include::style.adoc[]


// * Platform config
// ** Edit developer-hub-config to include 
// ** Public


== Import parasol-API

* As a first step, we will import the API so that this API can then associated to the App automatically.
* From the *Create* section, click on the *Import* button of `Import API to Existing Catalog Envelope` template.

image:m4/import-api-template.png[width=40%]

=== Step 1: Provide information about Catalog Envelope to which API will be included

Fill out the following values and click *Next*

image:m4/import-api-template-1.png[]

[cols="1,2,2", options="header"]
|====
| *Field*  | *Description* | *Value*
| Gitlab Hostname | Keep default value |` https://gitlab-gitlab.{openshift_cluster_ingress_domain}`
| GitLab Organization | Enter value | `parasol`
| Repository Name | Enter value. TODO: What is Envelope | `envelope-parasol-catalog`
|====

=== Step 2: Provide information about your existing API

Fill out the following values and click *Next*
image:m4/import-api-template-2.png[]

[cols="1,2,2", options="header"]
|====

| *Field*  | *Description* | *Value*
| GitLab Organization | This is the Git org where the repo resides| `parasol`
| Repository Name | enter this value | `parasol-store-api` 
| System Name | TODO: System  | `system:default/parasol-system`
| Path to where API spec is defined | Enter full path of the API | `https://gitlab-gitlab.{openshift_cluster_ingress_domain}/parasol/parasol-store-api/-/blob/main/openapi.yaml`
| A Short Description Of This Component | Enter value | `API for parasol-store`
| Type Of API | Choose from options | `openapi` 
|====

=== Step 3: Provide information about the new component for your existing app

Fill out the following values and click *Next*
image:m4/import-api-template-3.png[]

[cols="1,2,2", options="header"]
|====
| *Field*  | *Description* | *Value*
| Component Name | This is how this API will be identified by Developer Hub | `parasol-store-api` 
| Owner | Choose from dropdown | `group:default/dev1`
| A Short Description Of This Component |Enter a suitable description | Open API specification for the parasol-store application
| Lifecycle | Enter value. Can be any lifecycle value, but take great care to establish a proper taxonomy for these. (Well-known  values `experimental`, `production` and `deprecated`)

 | `Production` 
|====


=== Step 4: Review & Create

Review the fields, and click on the *Create* button

image:m4/import-api-template-4.png[]

* Click on both the URLs and merge the requests

* Open the envelope-parasol-catalog repo
* URL to the catalog-info has been added to the envelope

* Under the parasol-store-api folder docs  and catalog-info.yaml are created

* In a few minutes you will notice that this API automatically starts appearing in the APIs section

* This is because of the Autodiscovery feature of RHDH 
https://console-openshift-console.apps.sno.sandbox1887.opentlc.com/k8s/ns/backstage/configmaps/backstage-developer-hub-app-config 


	

